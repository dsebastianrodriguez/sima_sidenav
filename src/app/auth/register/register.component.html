<div class="container rounded shadow mt-3">
    <br>
    <div class="form-group mb-2">
        <label class="form-check-label text-muted">
            Los datos marcados con un asterisco
            <strong class="text-danger">(*)</strong> son requeridos</label>
    </div>
    <br>
    <div class="d-flex justify-content-between">
        <h4>Registrar usuario</h4>
        <a href="#" routerLink="/login" class="btn btn-dark">Atras</a>
    </div>
    <div class="form-row">
        <form class="p-4 form" [formGroup]="form" (ngSubmit)="submit()">

            <div class="col-lg-4 mb-3">
                <div class="form-group">
                    <label for="title">Nombre completo:</label>
                    <small class="text-danger" title="requerido"> (*)</small>
                    <input id="name" type="text" class="form-control" formControlName="name" [ngClass]="{
                        'is-valid':
                        name?.enabled &&
                        (name?.touched || name?.dirty) &&
                        name?.valid,
                        'is-invalid':
                        name?.enabled &&
                        (name?.touched || name?.dirty) &&
                        !name?.valid
                    }">
                </div>
                <div class="text-danger" *ngIf="(name?.dirty || name?.touched) && !name?.valid">
                    <div *ngIf="name?.hasError('required')">El campo es requerido.</div>
                    <div *ngIf="name?.hasError('pattern')">Solo se aceptan letras y espacios.</div>
                    <div *ngIf="name?.hasError('minlength')">Mínimo 15 caracteres.</div>
                    <div *ngIf="name?.hasError('maxlength')">Maximo 100 caracteres.</div>
                </div>
            </div>

            <div class="col-lg-4 mb-3">
                <div class="form-group">
                    <label for="idnumber">Número documento:</label>
                    <small class="text-danger" title="requerido"> (*)</small>
                    <input id="idnumber" type="text" class="form-control" formControlName="idnumber" [ngClass]="{
                        'is-valid':
                        idnumber?.enabled &&
                        (idnumber?.touched || idnumber?.dirty) &&
                        idnumber?.valid,
                        'is-invalid':
                        idnumber?.enabled &&
                        (idnumber?.touched || idnumber?.dirty) &&
                        !idnumber?.valid
                    }">
                </div>
                <div class="text-danger" *ngIf="(idnumber?.dirty || idnumber?.touched) && !idnumber?.valid">
                    <div *ngIf="idnumber?.hasError('required')">El campo es requerido.</div>
                    <div *ngIf="idnumber?.hasError('pattern')">Solo se aceptan números</div>
                    <div *ngIf="idnumber?.hasError('minlength')">Mínimo 6 caracteres.</div>
                    <div *ngIf="idnumber?.hasError('maxlength')">Máximo 20 caracteres.</div>
                </div>
            </div>

            <div class="col-lg-4 mb-3">
                <div class="form-group">
                    <label for="email">Correo electronico:</label>
                    <small class="text-danger" title="requerido"> (*)</small>
                    <input id="email" type="email" class="form-control" formControlName="email" [ngClass]="{
                        'is-valid':
                        email?.enabled &&
                        (email?.touched || email?.dirty) &&
                        email?.valid,
                        'is-invalid':
                        email?.enabled &&
                        (email?.touched || email?.dirty) &&
                        !email?.valid
                    }">
                </div>
                <div class="text-danger" *ngIf="(email?.dirty || email?.touched) && !email?.valid">
                    <div *ngIf="email?.hasError('required')">El campo es requerido.</div>
                    <div *ngIf="email?.hasError('email')">Formato correo. (test@example.com)</div>
                    <div *ngIf="email?.hasError('minlength')">Minimo 8 caracteres.</div>
                    <div *ngIf="email?.hasError('maxlength')">Máximo 50 caracteres.</div>
                </div>
            </div>

            <div class="col-lg-4 mb-3">
                <div class="form-group">
                    <label for="title">Usuario:</label>
                    <small class="text-danger" title="requerido"> (*)</small>
                    <input id="usuario" type="text" class="form-control" formControlName="usuario" [ngClass]="{
                        'is-valid':
                        usuario?.enabled &&
                        (usuario?.touched || usuario?.dirty) &&
                        usuario?.valid,
                        'is-invalid':
                        usuario?.enabled &&
                        (usuario?.touched || usuario?.dirty) &&
                        !usuario?.valid
                    }">
                </div>
                <div class="text-danger" *ngIf="(usuario?.dirty || usuario?.touched) && !usuario?.valid">
                    <div *ngIf="usuario?.hasError('required')">El campo es requerido.</div>
                    <div *ngIf="usuario?.hasError('pattern')">Solo se acepta letras y numeros.</div>
                    <div *ngIf="usuario?.hasError('minlength')">Minimo 6 digitos.</div>
                    <div *ngIf="usuario?.hasError('maxlength')">Maximo 20 digitos.</div>
                </div>
            </div>

            <div class="col-lg-4 mb-3">
                <div class="form-group">
                    <label for="title">Contraseña:</label>
                    <small class="text-danger" title="requerido"> (*)</small>
                    <div class="input-group">
                        <input id="password" type="password" class="form-control" formControlName="password" [ngClass]="{
                        'is-valid':
                        password?.enabled &&
                        (password?.touched || password?.dirty) &&
                        password?.valid,
                        'is-invalid':
                        password?.enabled &&
                        (password?.touched || password?.dirty) &&
                        !password?.valid
                    }">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button"
                                (click)="togglePasswordVisibility('password')">
                                <i class="fa" [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="text-danger"
                    *ngIf="(password?.dirty || password?.touched) && !password?.valid">
                    <div *ngIf="password?.hasError('required')">El campo es requerido.</div>
                    <div *ngIf="password?.hasError('pattern')">No se admite ese tipo de caracter especial.</div>
                    <div *ngIf="password?.hasError('minlength')">Minimo 6 digitos.</div>
                    <div *ngIf="password?.hasError('maxlength')">Maximo 20 digitos.</div>
                </div>
            </div>

            <div class="col-lg-4 mb-3">
                <div class="form-group">
                    <label for="title">Confirmar contraseña:</label>
                    <small class="text-danger" title="requerido"> (*)</small>
                    <div class="input-group">
                        <input id="password_confirmation" type="password" class="form-control"
                            formControlName="password_confirmation" [ngClass]="{
                            'is-valid':
                            password_confirmation?.enabled &&
                            (password_confirmation?.touched || password_confirmation?.dirty) &&
                            password_confirmation?.valid,
                            'is-invalid':
                            password_confirmation?.enabled &&
                            (password_confirmation?.touched || password_confirmation?.dirty) &&
                            !password_confirmation?.valid
                        }">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button"
                                (click)="togglePasswordCVisibility('password_confirmation')">
                                <i class="fa" [ngClass]="passwordConfirmationVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="text-danger"
                    *ngIf="(password_confirmation?.dirty || password_confirmation?.touched) && !password_confirmation?.valid">
                    <div *ngIf="password_confirmation?.hasError('required')">El campo es requerido.</div>
                    <div *ngIf="password_confirmation?.hasError('pattern')">No se admite ese tipo de caracter especial.</div>
                    <div *ngIf="password_confirmation?.hasError('minlength')">Minimo 6 digitos.</div>
                    <div *ngIf="password_confirmation?.hasError('maxlength')">Maximo 20 digitos.</div>
                    <!-- <div *ngIf="password_confirmation?.hasError('notMatch')">Las contraseñas no coinciden.</div> -->
                </div>
            </div>

            <button class="btn btn-dark" type="submit" [disabled]="!form.valid">Agregar</button>
        </form>
    </div>
</div>